<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>P√°gina de Sorteos</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(135deg,#ff0000,#ff7f00,#ffff00,#00ff00,#00ffff,#0000ff,#8b00ff);
  display:flex;align-items:center;justify-content:center;
  font-family:Arial,sans-serif;
}
.wrapper{display:flex;align-items:center;gap:6px}

/* ===== APP ===== */
.app{
  width:360px;background:rgba(0,0,0,.65);border-radius:25px;
  padding:0 15px 25px;box-shadow:0 0 40px rgba(0,0,0,.7);
  text-align:center;position:relative;overflow:hidden;
}
.linea-superior{
  width:60%;height:2px;margin:10px auto 6px;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.8),transparent)
}
.datetime{font-size:.85rem;color:#eaeaea;margin-top:8px}
.titulo{font-size:1.6rem;font-weight:bold;color:#fff;margin-top:6px}

.ruleta-container{position:relative;width:280px;height:280px;margin:10px auto 20px}
.flecha{
  position:absolute;top:-2px;left:50%;transform:translateX(-50%);
  width:0;height:0;border-left:14px solid transparent;
  border-right:14px solid transparent;border-top:24px solid #fff
}
canvas{width:100%;height:100%;border-radius:50%;background:#fff}

button{
  width:85%;padding:14px;font-size:1.1rem;border-radius:30px;border:none;
  background:linear-gradient(45deg,#ff9f00,#ff6a00);color:#fff;font-weight:bold
}

/* ===== CARD GANADOR ===== */
.overlay{
  position:absolute;inset:0;background:rgba(0,0,0,.65);
  display:flex;align-items:center;justify-content:center;
  opacity:0;pointer-events:none;transition:.5s
}
.overlay.show{opacity:1;pointer-events:auto}
.card{
  background:#111;border-radius:20px;padding:26px 30px;
  text-align:center;color:#fff;
  box-shadow:0 0 30px rgba(0,0,0,.9);
  transform:scale(.85);animation:pop .4s forwards
}
@keyframes pop{to{transform:scale(1)}}
.card h2{margin:0 0 10px;font-size:1.1rem;opacity:.8}
.card .winner{font-size:1.8rem;font-weight:bold;margin:8px 0}
.card .datetime-card{font-size:.85rem;opacity:.7}
.card .foot{font-size:.75rem;opacity:.5;margin-top:4px}
</style>
</head>

<body>

<div class="app">
  <div class="linea-superior"></div>

  <div class="datetime">
    <span id="fecha"></span> ‚è∞ <span id="hora"></span>
  </div>

  <div class="titulo">P√ÅGINA DE SORTEOS</div>

  <div class="ruleta-container">
    <div class="flecha"></div>
    <canvas id="ruleta" width="280" height="280"></canvas>
  </div>

  <button id="girar">GIRAR</button>

  <div class="overlay" id="overlay">
    <div class="card">
      <h2>üèÜ RESULTADO FINAL</h2>
      <div class="winner">GIME3471</div>
      <div class="datetime-card" id="fechaResultado"></div>
      <div class="foot">Sorteo validado</div>
    </div>
  </div>
</div>

<script>
/* FECHA Y HORA */
function actualizarHora(){
  const a=new Date();
  fecha.textContent=a.toLocaleDateString("es-AR");
  hora.textContent=a.toLocaleTimeString("es-AR",{hour12:false})+" (GMT-3)";
}
setInterval(actualizarHora,1000);actualizarHora();

/* PARTICIPANTES */
const baseParticipantes=[
  "GISE2145","GISE2145","DAI4239","DAI4239","MILAGROS3140",
  "KARY8538","KARY8538","MELI123","TOMAS4392","TOMAS4392","SOFY0405",
  "ROBER51B","ROBER51B","ROBER51B","ROBER51B","ROBER51B",
  "ROBER51B","ROBER51B","ROBER51B","ROBER51B","ROBER51B",
  "MALE3515","MALE3515","MALE3515","MALE3515","MALE3515",
  "MALE3515","MALE3515","MALE3515","MALE3515","MALE3515",
  "MALE3515","MALE3515","MALE3515","MALE3515","MALE3515",
  "MALE3515","MALE3515","MALE3515","MALE3515","MALE3515",
  "EUGE3362","MELANY7867",
  "CELIA5176","CELIA5176","CELIA5176",
  "ALE7152","ALE7152","ALE7152",
  "GER557","GER557","GER557","GER557","GER557","GER557",
  "GER557","GER557","GER557","GER557","GER557","GER557",
  "TIHAGO1290","TIHAGO1290","TIHAGO1290","TIHAGO1290","TIHAGO1290",
  "TIHAGO1290","TIHAGO1290","TIHAGO1290","TIHAGO1290","TIHAGO1290",
  "TIHAGO1290","TIHAGO1290","TIHAGO1290","TIHAGO1290","TIHAGO1290",
  "ROSBILAT","AINARA8437","MABEL5430","NATI4774",
  "MARIELA0711","MARIELA0711","CRIS0966","CRIS0966",
  "NOEMI3287","NICO2072","KAREN6558","JASMIN2544",
  "TAMARA0846","PAO3577","MONICA8933","NAZA7611","EV4758",
  "KARINA3941","GABI2698","JORGE6017",
  "YANNI3932","YANNI3932","SANDRA6551",
  "GIME3471","GIME3471","GIME3471","GIME3471","GIME3471","GIME3471",
  "GIME3471","GIME3471","GIME3471","GIME3471","GIME3471","GIME3471",
  "YOHANA0608","ceci6655"
];
function intercalar(l){
  const c={},r=[];l.forEach(n=>c[n]=(c[n]||0)+1);
  let k=Object.keys(c),ok=true;
  while(ok){ok=false;for(const n of k){if(c[n]>0){r.push(n);c[n]--;ok=true}}}
  return r;
}
const participantes=intercalar(baseParticipantes);

/* RULETA */
const canvas=document.getElementById("ruleta");
const ctx=canvas.getContext("2d");
const total=participantes.length;
const radio=canvas.width/2;
const colores=["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93","#ff924c"];
let ang=0,gir=false;
let mostrarGanador=false;

function draw(){
  const a=2*Math.PI/total;
  participantes.forEach((n,i)=>{
    ctx.beginPath();
    ctx.moveTo(radio,radio);
    ctx.arc(radio,radio,radio,i*a,(i+1)*a);
    ctx.fillStyle=colores[i%colores.length];
    ctx.fill();

    ctx.save();
    ctx.translate(radio,radio);
    ctx.rotate(i*a+a/2);

    const esGanador = mostrarGanador && n==="GIME3471";

    ctx.textAlign="right";
    ctx.font = esGanador ? "bold 18px Arial" : "bold 12px Arial";
    ctx.fillStyle = esGanador ? "#ffffff" : "#ffffff";

    if(esGanador){
      ctx.shadowColor="rgba(255,255,255,0.9)";
      ctx.shadowBlur=12;
    }else{
      ctx.shadowBlur=0;
    }

    ctx.fillText(n,radio-10,4);
    ctx.restore();
  });
}
draw();

document.getElementById("girar").onclick=()=>{
  if(gir)return;gir=true;

  const idx=participantes.indexOf("GIME3471");
  const g=360/total;
  const fin=ang+6*360+(270-(idx*g+g/2));
  const ini=performance.now(),dur=5000,ia=ang;

  function anim(t){
    const p=Math.min((t-ini)/dur,1);
    ang=ia+(fin-ia)*(1-Math.pow(1-p,3));
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.save();
    ctx.translate(radio,radio);
    ctx.rotate(ang*Math.PI/180);
    ctx.translate(-radio,-radio);
    draw();
    ctx.restore();

    if(p<1){
      requestAnimationFrame(anim);
    }else{
      /* RESALTA SOLO EL NOMBRE */
      mostrarGanador=true;
      draw();

      const ahora=new Date();
      fechaResultado.textContent=
        ahora.toLocaleDateString("es-AR")+" ¬∑ "+
        ahora.toLocaleTimeString("es-AR",{hour12:false})+" (GMT-3)";

      setTimeout(()=>{
        overlay.classList.add("show");
        gir=false;
      },700);
    }
  }
  requestAnimationFrame(anim);
};
</script>

</body>
</html>
