<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>P√°gina de Sorteos</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  min-height:100vh;
  background: linear-gradient(
    135deg,
    #ff0000,
    #ff7f00,
    #ffff00,
    #00ff00,
    #00ffff,
    #0000ff,
    #8b00ff
  );
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:Arial,sans-serif;
}

.app{
  width:360px;
  max-width:95%;
  background: rgba(0,0,0,0.65);
  border-radius:25px;
  padding:0 15px 25px;
  box-shadow:0 0 40px rgba(0,0,0,.7);
  text-align:center;
  position: relative;
  overflow: hidden;
}

/* ‚ú® GLOW SUPERIOR */
.app::before{
  content:"";
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:80px;
  background: radial-gradient(
    ellipse at top,
    rgba(255,255,255,0.25),
    rgba(255,255,255,0)
  );
  pointer-events:none;
}

/* ‚ûñ L√çNEA FINITA */
.linea-superior{
  width:60%;
  height:2px;
  margin:14px auto 10px;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255,255,255,0.8),
    transparent
  );
  border-radius:2px;
}

/* üî• T√çTULO */
.titulo{
  font-size:1.6rem;
  font-weight:bold;
  margin-bottom:10px;
  color:#ffffff;
  text-shadow:
    0 0 6px rgba(255,255,255,.9),
    0 0 12px rgba(255,255,255,.6);
}

.ruleta-container{
  position:relative;
  width:280px;
  height:280px;
  margin:10px auto 20px;
}

/* üîª FLECHA ARRIBA ‚Äì PUNTA HACIA ABAJO (‚àá) */
.flecha{
  position:absolute;
  top:-2px;
  left:50%;
  transform:translateX(-50%);
  width:0;
  height:0;
  border-left:14px solid transparent;
  border-right:14px solid transparent;
  border-top:24px solid #ffffff;
  z-index:10;
}

canvas{
  width:100%;
  height:100%;
  border-radius:50%;
  background:#ffffff;
}

button{
  width:85%;
  padding:14px;
  font-size:1.1rem;
  border-radius:30px;
  border:none;
  background:linear-gradient(45deg,#ff9f00,#ff6a00);
  color:#fff;
  font-weight:bold;
  cursor:pointer;
  box-shadow:0 0 20px rgba(255,140,0,.6);
}

button:disabled{opacity:.6}

.resultado{
  margin-top:15px;
  font-size:1.3rem;
  color:#ffffff;
  text-shadow:0 0 10px rgba(255,255,255,.8);
}
</style>
</head>

<body>

<div class="app">

  <div class="linea-superior"></div>
  <div class="titulo">P√ÅGINA DE SORTEOS</div>

  <div class="ruleta-container">
    <div class="flecha"></div>
    <canvas id="ruleta" width="280" height="280"></canvas>
  </div>

  <button id="girar">GIRAR</button>
  <div id="resultado" class="resultado"></div>
</div>

<script>
/* üîπ LISTA BASE (repeticiones = cargas) */
const baseParticipantes = [
  // MILAGROS3140 (1)
  "MILAGROS3140",

  // KARY8538 (2)
  "KARY8538","KARY8538",

  // MELI123 (1)
  "MELI123",

  // TOMAS4392 (2)
  "TOMAS4392","TOMAS4392",

  // SOFY0405 (1)
  "SOFY0405",

  // ROBER51B (10)
  "ROBER51B","ROBER51B","ROBER51B","ROBER51B","ROBER51B",
  "ROBER51B","ROBER51B","ROBER51B","ROBER51B","ROBER51B",

  // MALE3515 (20)
  "MALE3515","MALE3515","MALE3515","MALE3515","MALE3515",
  "MALE3515","MALE3515","MALE3515","MALE3515","MALE3515",
  "MALE3515","MALE3515","MALE3515","MALE3515","MALE3515",
  "MALE3515","MALE3515","MALE3515","MALE3515","MALE3515",

  // EUGE3362 (1)
  "EUGE3362",

  // MELANY7867 (1)
  "MELANY7867",

  // CELIA5176 (3)
  "CELIA5176","CELIA5176","CELIA5176",

  // ALE7152 (2)
  "ALE7152","ALE7152",

  // GER557 (12)
  "GER557","GER557","GER557","GER557","GER557","GER557",
  "GER557","GER557","GER557","GER557","GER557","GER557",

  // TIHAGO1290 (15)
  "TIHAGO1290","TIHAGO1290","TIHAGO1290","TIHAGO1290","TIHAGO1290",
  "TIHAGO1290","TIHAGO1290","TIHAGO1290","TIHAGO1290","TIHAGO1290",
  "TIHAGO1290","TIHAGO1290","TIHAGO1290","TIHAGO1290","TIHAGO1290",

  // ROSBILAT (1)
  "ROSBILAT",

  // AINARA8437 (1)
  "AINARA8437",

  // MABEL5430 (1)
  "MABEL5430",

  // NATI4774 (1)
  "NATI4774",

  // MARIELA0711 (2)
  "MARIELA0711","MARIELA0711",

  // CRIS0966 (2)
  "CRIS0966","CRIS0966",

  // NOEMI3287 (1)
  "NOEMI3287",

  // NICO2072 (1)
  "NICO2072",

  // KAREN6558 (1)
  "KAREN6558",

  // JASMIN2544 (1)
  "JASMIN2544",

  // TAMARA0846 (1)
  "TAMARA0846",

  // PAO3577 (1)
  "PAO3577",

  // MONICA8933 (1)
  "MONICA8933",

  // NAZA7611 (1)
  "NAZA7611",

  // EV4758 (1)
  "EV4758",

  // KARINA3941 (1)
  "KARINA3941",

  // GABI2698 (1)
  "GABI2698",

  // JORGE6017 (1)
  "JORGE6017",

  // YANNI3932 (1)
  "YANNI3932",

  // SANDRA6551 (1)
  "SANDRA6551",

  // GIME3471 (12)
  "GIME3471","GIME3471","GIME3471","GIME3471","GIME3471","GIME3471",
  "GIME3471","GIME3471","GIME3471","GIME3471","GIME3471","GIME3471"
];

/* üîÅ INTERCALADO (round-robin) */
function intercalar(lista){
  const conteo = {};
  lista.forEach(n => conteo[n] = (conteo[n] || 0) + 1);
  const nombres = Object.keys(conteo);
  const res = [];
  let quedan = true;
  while(quedan){
    quedan = false;
    for(const n of nombres){
      if(conteo[n] > 0){
        res.push(n);
        conteo[n]--;
        quedan = true;
      }
    }
  }
  return res;
}

const participantes = intercalar(baseParticipantes);

const canvas = document.getElementById("ruleta");
const ctx = canvas.getContext("2d");
const boton = document.getElementById("girar");
const resultado = document.getElementById("resultado");

const total = participantes.length;
const radio = canvas.width / 2;
const colores = ["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93","#ff924c"];

let anguloActual = 0;
let girando = false;

function dibujarRuleta(){
  const ang = (2*Math.PI)/total;
  participantes.forEach((nombre,i)=>{
    ctx.beginPath();
    ctx.moveTo(radio,radio);
    ctx.arc(radio,radio,radio,i*ang,(i+1)*ang);
    ctx.fillStyle = colores[i%colores.length];
    ctx.fill();

    ctx.save();
    ctx.translate(radio,radio);
    ctx.rotate(i*ang + ang/2);
    ctx.textAlign="right";
    ctx.fillStyle="#fff";
    ctx.font="bold 12px Arial";
    ctx.fillText(nombre, radio-10, 4);
    ctx.restore();
  });
}

dibujarRuleta();

boton.addEventListener("click",()=>{
  if(girando) return;
  girando=true;
  boton.disabled=true;
  resultado.textContent="";

  /* üéØ GANADOR FIJO */
  const indice = participantes.indexOf("GIME3471");

  const grados = 360/total;
  const anguloObjetivo = 270 - (indice*grados + grados/2);

  const vueltas = 6*360;
  const anguloFinal = vueltas + anguloObjetivo;

  const duracion = 5000;
  const inicio = performance.now();
  const inicioAng = anguloActual;

  function animar(t){
    const p = Math.min((t-inicio)/duracion,1);
    anguloActual = inicioAng + (anguloFinal-inicioAng)*(1-Math.pow(1-p,3));

    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.save();
    ctx.translate(radio,radio);
    ctx.rotate(anguloActual*Math.PI/180);
    ctx.translate(-radio,-radio);
    dibujarRuleta();
    ctx.restore();

    if(p<1){
      requestAnimationFrame(animar);
    }else{
      resultado.textContent = "üéâ GANADOR: GIME3471";
      girando=false;
      boton.disabled=false;
    }
  }
  requestAnimationFrame(animar);
});
</script>

</body>
</html>
